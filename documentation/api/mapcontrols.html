
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MapControls Class - Map Controls Documentation</title>
  <link rel="stylesheet" href="/documentation/assets/styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10.0.0/dist/mermaid.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize syntax highlighting
      hljs.highlightAll();
      
      // Initialize mermaid diagrams
      mermaid.initialize({ 
        startOnLoad: true,
        theme: 'neutral',
        flowchart: { 
          useMaxWidth: true, 
          htmlLabels: true 
        }
      });
    });
  </script>
</head>
<body>
  <div class="container">
    <header>
      <h1>MapControls Class</h1>
    </header>
    
    <nav class="main-nav">
      <ul>
        <li><a href="/documentation/index.html">Home</a></li>
        <li><a href="/documentation/guides/getting-started.html">Getting Started</a></li>
        <li><a href="/documentation/guides/installation.html">Installation</a></li>
        <li><a href="/documentation/api/index.html">API Reference</a></li>
        <li><a href="/documentation/examples/index.html">Examples</a></li>
        <li><a href="/documentation/guides/advanced-usage.html">Advanced Usage</a></li>
      </ul>
    </nav>
    
    <main>
      <h1 id="mapcontrols-class">MapControls Class</h1>
<p>The <code>MapControls</code> class is the main entry point for the Map Controls module. It provides methods for initializing, controlling, and interacting with the map.</p>
<h2 id="import">Import</h2>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MapControls</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;map-controls&#x27;</span>;
</code></pre>
<h2 id="constructor">Constructor</h2>
<pre><code class="hljs language-typescript"><span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-attr">options</span>: <span class="hljs-title class_">MapControlsOptions</span></span>)
</code></pre>
<p>Creates a new instance of the MapControls class.</p>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>options</code></td>
<td><code>MapControlsOptions</code></td>
<td>Configuration options for the map controls</td>
</tr>
</tbody></table>
<h3 id="example">Example</h3>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">const</span> mapControls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MapControls</span>({
  <span class="hljs-attr">container</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;map-container&#x27;</span>),
  <span class="hljs-attr">mapSrc</span>: <span class="hljs-string">&#x27;path/to/map.jpg&#x27;</span>,
  <span class="hljs-attr">initialZoom</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">minZoom</span>: <span class="hljs-number">0.5</span>,
  <span class="hljs-attr">maxZoom</span>: <span class="hljs-number">3</span>,
  <span class="hljs-attr">showControls</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">controlsPosition</span>: <span class="hljs-string">&#x27;bottom-right&#x27;</span>
});
</code></pre>
<h2 id="properties">Properties</h2>
<p>The MapControls class has the following properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Access</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>options</code></td>
<td><code>MapControlsOptions</code></td>
<td>private</td>
<td>Configuration options</td>
</tr>
<tr>
<td><code>container</code></td>
<td><code>HTMLElement</code></td>
<td>private</td>
<td>The container element</td>
</tr>
<tr>
<td><code>originalContainer</code></td>
<td><code>HTMLElement</code></td>
<td>private</td>
<td>The original container element</td>
</tr>
<tr>
<td><code>state</code></td>
<td><code>MapState</code></td>
<td>private</td>
<td>Current map state</td>
</tr>
<tr>
<td><code>eventManager</code></td>
<td><code>EventManager</code></td>
<td>private</td>
<td>Event manager instance</td>
</tr>
<tr>
<td><code>renderer</code></td>
<td><code>CanvasRenderer</code></td>
<td>private</td>
<td>Renderer instance</td>
</tr>
<tr>
<td><code>mouseHandler</code></td>
<td><code>MouseHandler | null</code></td>
<td>private</td>
<td>Mouse handler instance</td>
</tr>
<tr>
<td><code>touchHandler</code></td>
<td><code>TouchHandler | null</code></td>
<td>private</td>
<td>Touch handler instance</td>
</tr>
<tr>
<td><code>controlsManager</code></td>
<td><code>ControlsManager | null</code></td>
<td>private</td>
<td>Controls manager instance</td>
</tr>
<tr>
<td><code>initialized</code></td>
<td><code>boolean</code></td>
<td>private</td>
<td>Whether the map is initialized</td>
</tr>
</tbody></table>
<h2 id="public-methods">Public Methods</h2>
<h3 id="on">on</h3>
<pre><code class="hljs language-typescript"><span class="hljs-title function_">on</span>(<span class="hljs-attr">type</span>: <span class="hljs-title class_">EventType</span>, <span class="hljs-attr">handler</span>: <span class="hljs-title class_">EventHandler</span>): <span class="hljs-built_in">void</span>
</code></pre>
<p>Adds an event listener for the specified event type.</p>
<h4 id="parameters-1">Parameters</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>type</code></td>
<td><code>EventType</code></td>
<td>The type of event to listen for</td>
</tr>
<tr>
<td><code>handler</code></td>
<td><code>EventHandler</code></td>
<td>The event handler function</td>
</tr>
</tbody></table>
<h4 id="example-1">Example</h4>
<pre><code class="hljs language-typescript">mapControls.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;zoom&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">level</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Zoom level changed to: <span class="hljs-subst">${level}</span>`</span>);
});
</code></pre>
<h3 id="off">off</h3>
<pre><code class="hljs language-typescript"><span class="hljs-title function_">off</span>(<span class="hljs-attr">type</span>: <span class="hljs-title class_">EventType</span>, <span class="hljs-attr">handler</span>: <span class="hljs-title class_">EventHandler</span>): <span class="hljs-built_in">void</span>
</code></pre>
<p>Removes an event listener for the specified event type.</p>
<h4 id="parameters-2">Parameters</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>type</code></td>
<td><code>EventType</code></td>
<td>The type of event to remove</td>
</tr>
<tr>
<td><code>handler</code></td>
<td><code>EventHandler</code></td>
<td>The event handler function to remove</td>
</tr>
</tbody></table>
<h4 id="example-2">Example</h4>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">zoomHandler</span> = (<span class="hljs-params">level</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Zoom level: <span class="hljs-subst">${level}</span>`</span>);
};

<span class="hljs-comment">// Add event listener</span>
mapControls.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;zoom&#x27;</span>, zoomHandler);

<span class="hljs-comment">// Remove event listener</span>
mapControls.<span class="hljs-title function_">off</span>(<span class="hljs-string">&#x27;zoom&#x27;</span>, zoomHandler);
</code></pre>
<h3 id="zoomin">zoomIn</h3>
<pre><code class="hljs language-typescript"><span class="hljs-title function_">zoomIn</span>(<span class="hljs-attr">factor</span>?: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span>
</code></pre>
<p>Zooms in the map by the specified factor or the default zoom step.</p>
<h4 id="parameters-3">Parameters</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>factor</code></td>
<td><code>number</code></td>
<td><code>options.zoomStep</code></td>
<td>The zoom factor to apply</td>
</tr>
</tbody></table>
<h4 id="example-3">Example</h4>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Zoom in by the default step</span>
mapControls.<span class="hljs-title function_">zoomIn</span>();

<span class="hljs-comment">// Zoom in by a custom factor</span>
mapControls.<span class="hljs-title function_">zoomIn</span>(<span class="hljs-number">0.2</span>);
</code></pre>
<h3 id="zoomout">zoomOut</h3>
<pre><code class="hljs language-typescript"><span class="hljs-title function_">zoomOut</span>(<span class="hljs-attr">factor</span>?: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span>
</code></pre>
<p>Zooms out the map by the specified factor or the default zoom step.</p>
<h4 id="parameters-4">Parameters</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>factor</code></td>
<td><code>number</code></td>
<td><code>options.zoomStep</code></td>
<td>The zoom factor to apply</td>
</tr>
</tbody></table>
<h4 id="example-4">Example</h4>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Zoom out by the default step</span>
mapControls.<span class="hljs-title function_">zoomOut</span>();

<span class="hljs-comment">// Zoom out by a custom factor</span>
mapControls.<span class="hljs-title function_">zoomOut</span>(<span class="hljs-number">0.2</span>);
</code></pre>
<h3 id="panto">panTo</h3>
<pre><code class="hljs language-typescript"><span class="hljs-title function_">panTo</span>(<span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span>
</code></pre>
<p>Pans the map to the specified position.</p>
<h4 id="parameters-5">Parameters</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>x</code></td>
<td><code>number</code></td>
<td>The x-coordinate to pan to</td>
</tr>
<tr>
<td><code>y</code></td>
<td><code>number</code></td>
<td>The y-coordinate to pan to</td>
</tr>
</tbody></table>
<h4 id="example-5">Example</h4>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Pan to a specific position</span>
mapControls.<span class="hljs-title function_">panTo</span>(<span class="hljs-number">100</span>, <span class="hljs-number">200</span>);
</code></pre>
<h3 id="reset">reset</h3>
<pre><code class="hljs language-typescript"><span class="hljs-title function_">reset</span>(): <span class="hljs-built_in">void</span>
</code></pre>
<p>Resets the map to its initial state (zoom level and position).</p>
<h4 id="example-6">Example</h4>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Reset the map</span>
mapControls.<span class="hljs-title function_">reset</span>();
</code></pre>
<h3 id="setmapsrc">setMapSrc</h3>
<pre><code class="hljs language-typescript"><span class="hljs-title function_">setMapSrc</span>(<span class="hljs-attr">mapSrc</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;
</code></pre>
<p>Changes the map source image.</p>
<h4 id="parameters-6">Parameters</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>mapSrc</code></td>
<td><code>string</code></td>
<td>The path to the new map image</td>
</tr>
</tbody></table>
<h4 id="returns">Returns</h4>
<p>A Promise that resolves when the map is loaded.</p>
<h4 id="example-7">Example</h4>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Change the map source</span>
mapControls.<span class="hljs-title function_">setMapSrc</span>(<span class="hljs-string">&#x27;path/to/new-map.jpg&#x27;</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Map source changed successfully&#x27;</span>);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Failed to change map source:&#x27;</span>, error);
  });
</code></pre>
<h3 id="showcontrols">showControls</h3>
<pre><code class="hljs language-typescript"><span class="hljs-title function_">showControls</span>(): <span class="hljs-built_in">void</span>
</code></pre>
<p>Shows the map controls if they are hidden.</p>
<h4 id="example-8">Example</h4>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Show controls</span>
mapControls.<span class="hljs-title function_">showControls</span>();
</code></pre>
<h3 id="hidecontrols">hideControls</h3>
<pre><code class="hljs language-typescript"><span class="hljs-title function_">hideControls</span>(): <span class="hljs-built_in">void</span>
</code></pre>
<p>Hides the map controls.</p>
<h4 id="example-9">Example</h4>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Hide controls</span>
mapControls.<span class="hljs-title function_">hideControls</span>();
</code></pre>
<h3 id="getstate">getState</h3>
<pre><code class="hljs language-typescript"><span class="hljs-title function_">getState</span>(): <span class="hljs-title class_">MapState</span>
</code></pre>
<p>Gets the current state of the map.</p>
<h4 id="returns-1">Returns</h4>
<p>A copy of the current map state.</p>
<h4 id="example-10">Example</h4>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Get current state</span>
<span class="hljs-keyword">const</span> state = mapControls.<span class="hljs-title function_">getState</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Current zoom level:&#x27;</span>, state.<span class="hljs-property">zoom</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Current position:&#x27;</span>, state.<span class="hljs-property">position</span>);
</code></pre>
<h3 id="destroy">destroy</h3>
<pre><code class="hljs language-typescript"><span class="hljs-title function_">destroy</span>(): <span class="hljs-built_in">void</span>
</code></pre>
<p>Destroys the map controls and cleans up resources.</p>
<h4 id="example-11">Example</h4>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Destroy map controls</span>
mapControls.<span class="hljs-title function_">destroy</span>();
</code></pre>
<h2 id="private-methods">Private Methods</h2>
<h3 id="init">init</h3>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">init</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;
</code></pre>
<p>Initializes the map controls.</p>
<h3 id="centermap">centerMap</h3>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">private</span> <span class="hljs-title function_">centerMap</span>(): <span class="hljs-built_in">void</span>
</code></pre>
<p>Centers the map in the container.</p>
<h3 id="updateposition">updatePosition</h3>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">private</span> <span class="hljs-title function_">updatePosition</span>(<span class="hljs-attr">position</span>: <span class="hljs-title class_">Position</span>): <span class="hljs-built_in">void</span>
</code></pre>
<p>Updates the map position.</p>
<h3 id="updatezoom">updateZoom</h3>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">private</span> <span class="hljs-title function_">updateZoom</span>(<span class="hljs-attr">zoom</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">center</span>?: <span class="hljs-title class_">Position</span>): <span class="hljs-built_in">void</span>
</code></pre>
<p>Updates the zoom level.</p>
<h3 id="render">render</h3>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">private</span> <span class="hljs-title function_">render</span>(): <span class="hljs-built_in">void</span>
</code></pre>
<p>Renders the map with the current state.</p>
<h3 id="event-handlers">Event Handlers</h3>
<p>The following private methods handle events from the UI controls and interaction handlers:</p>
<ul>
<li><code>handlePanFromEvent</code>: Handles pan events from mouse/touch handlers</li>
<li><code>handleZoomFromEvent</code>: Handles zoom events from mouse/touch handlers</li>
<li><code>handleZoomIn</code>: Handles zoom in button clicks</li>
<li><code>handleZoomOut</code>: Handles zoom out button clicks</li>
<li><code>handlePanDirection</code>: Handles pan direction button clicks</li>
<li><code>handleReset</code>: Handles reset button clicks</li>
</ul>
<h2 id="initialization-flow">Initialization Flow</h2>
<p>The following diagram shows the initialization flow of the MapControls class:</p>
<pre><code class="hljs language-mermaid">sequenceDiagram
    participant App as Application
    participant MC as MapControls
    participant R as CanvasRenderer
    participant MH as MouseHandler
    participant TH as TouchHandler
    participant CM as ControlsManager
    
    App-&gt;&gt;MC: new MapControls(options)
    MC-&gt;&gt;MC: Create container
    MC-&gt;&gt;MC: Initialize state
    MC-&gt;&gt;MC: Add default styles
    MC-&gt;&gt;MC: init()
    MC-&gt;&gt;R: init(container, mapSrc)
    R--&gt;&gt;MC: Map loaded
    MC-&gt;&gt;MC: Update state with map size
    MC-&gt;&gt;MH: new MouseHandler()
    MC-&gt;&gt;TH: new TouchHandler()
    MC-&gt;&gt;CM: new ControlsManager()
    MC-&gt;&gt;CM: init()
    
    alt initialPosition provided
        MC-&gt;&gt;MC: updatePosition(initialPosition)
    else
        MC-&gt;&gt;MC: centerMap()
    end
    
    MC-&gt;&gt;MC: Set initialized = true
    MC-&gt;&gt;App: Dispatch &#x27;load&#x27; event
</code></pre>
<h2 id="interaction-flow">Interaction Flow</h2>
<p>The following diagram shows the interaction flow for zoom and pan operations:</p>
<pre><code class="hljs language-mermaid">sequenceDiagram
    participant User
    participant MC as MapControls
    participant MH as MouseHandler
    participant TH as TouchHandler
    participant R as CanvasRenderer
    
    alt Mouse Wheel Zoom
        User-&gt;&gt;MH: Mouse wheel
        MH-&gt;&gt;MC: handleZoomFromEvent(zoom, center)
        MC-&gt;&gt;MC: updateZoom(zoom, center)
        MC-&gt;&gt;MC: Calculate new position
        MC-&gt;&gt;MC: updatePosition(newPosition)
        MC-&gt;&gt;R: render()
        MC-&gt;&gt;User: Dispatch &#x27;zoom&#x27; event
    end
    
    alt Mouse Drag Pan
        User-&gt;&gt;MH: Mouse drag
        MH-&gt;&gt;MC: handlePanFromEvent(position)
        MC-&gt;&gt;MC: updatePosition(position)
        MC-&gt;&gt;R: render()
        MC-&gt;&gt;User: Dispatch &#x27;pan&#x27; event
    end
    
    alt Touch Pinch Zoom
        User-&gt;&gt;TH: Touch pinch
        TH-&gt;&gt;MC: handleZoomFromEvent(zoom, center)
        MC-&gt;&gt;MC: updateZoom(zoom, center)
        MC-&gt;&gt;MC: Calculate new position
        MC-&gt;&gt;MC: updatePosition(newPosition)
        MC-&gt;&gt;R: render()
        MC-&gt;&gt;User: Dispatch &#x27;zoom&#x27; event
    end
    
    alt Touch Drag Pan
        User-&gt;&gt;TH: Touch drag
        TH-&gt;&gt;MC: handlePanFromEvent(position)
        MC-&gt;&gt;MC: updatePosition(position)
        MC-&gt;&gt;R: render()
        MC-&gt;&gt;User: Dispatch &#x27;pan&#x27; event
    end
    
    alt Button Control
        User-&gt;&gt;MC: zoomIn()/zoomOut()/panTo()/reset()
        MC-&gt;&gt;MC: Update state
        MC-&gt;&gt;R: render()
        MC-&gt;&gt;User: Dispatch events
    end
</code></pre>
<h2 id="related-interfaces">Related Interfaces</h2>
<ul>
<li><a href="types.md#mapcontrolsoptions">MapControlsOptions</a></li>
<li><a href="types.md#mapstate">MapState</a></li>
<li><a href="types.md#position">Position</a></li>
<li><a href="types.md#size">Size</a></li>
<li><a href="types.md#eventtype">EventType</a></li>
<li><a href="types.md#eventhandler">EventHandler</a></li>
</ul>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="eventmanager.md">EventManager</a></li>
<li><a href="canvasrenderer.md">CanvasRenderer</a></li>
<li><a href="mousehandler.md">MouseHandler</a></li>
<li><a href="touchhandler.md">TouchHandler</a></li>
<li><a href="controlsmanager.md">ControlsManager</a></li>
</ul>

    </main>
    
    <footer class="footer">
      <p>Map Controls is licensed under the MIT License.</p>
      <p>Documentation generated on 5/18/2025</p>
    </footer>
  </div>
</body>
</html>
